<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TOPVIBES</title>
  <style>
    body{font-family:Arial;background:#000;color:#fff;text-align:center;padding:20px}
    h1{font-size:2.5rem;color:#ff3333}
    .shirts{display:flex;flex-wrap:wrap;justify-content:center;gap:20px}
    .shirt{background:#111;padding:15px;border-radius:10px;width:200px}
    img{width:100%;border-radius:8px}
  </style>
</head>
<body>
  <h1 id="heroTitle">Cargando...</h1>
  <p id="heroDesc"></p>

  <h2 id="aboutTitle"></h2>
  <p id="aboutDesc1"></p>
  <p id="aboutDesc2"></p>

  <h2 id="telegramTitle"></h2>
  <p id="telegramDesc"></p>
  <a id="telegramLink" href="#">Únete</a>

  <h2 id="shirtsTitle"></h2>
  <div id="shirts" class="shirts"></div>

  <h2 id="discountsTitle"></h2>
  <p id="discountsDesc"></p>
  <p>Precio: <span id="newPrice"></span>€</p>

  <footer>© <span id="copyrightYear"></span></footer>

  <script>
    const API = 'https://topvibes-production.up.railway.app';

    async function loadSite() {
      try {
        const res = await fetch(API + '/api/data');
        const data = await res.json();

        document.getElementById('heroTitle').textContent = data.hero?.title || '';
        document.getElementById('heroDesc').textContent = data.hero?.desc || '';
        document.getElementById('aboutTitle').textContent = data.about?.title || '';
        document.getElementById('aboutDesc1').textContent = data.about?.desc1 || '';
        document.getElementById('aboutDesc2').textContent = data.about?.desc2 || '';
        document.getElementById('telegramTitle').textContent = data.telegram?.title || '';
        document.getElementById('telegramDesc').textContent = data.telegram?.desc || '';
        document.getElementById('telegramLink').href = data.telegram?.link || '#';
        document.getElementById('telegramLink').textContent = 'Únete a Telegram';
        document.getElementById('shirtsTitle').textContent = data.shirtsTitle || '';

        const shirtsContainer = document.getElementById('shirts');
        shirtsContainer.innerHTML = '';
        (data.shirts || []).forEach(s => {
          const div = document.createElement('div');
          div.className = 'shirt';
          div.innerHTML = `
            <img src="${s.img}" alt="${s.name}">
            <h3>${s.name}</h3>
            <p>${s.price}€</p>
          `;
          shirtsContainer.appendChild(div);
        });

        document.getElementById('discountsTitle').textContent = data.discounts?.title || '';
        document.getElementById('discountsDesc').textContent = data.discounts?.desc || '';
        document.getElementById('newPrice').textContent = data.discounts?.newPrice || '';
        document.getElementById('copyrightYear').textContent = data.footer?.year || '';
      } catch (e) {
        document.body.innerHTML = '<h1>Error al cargar el sitio</h1>';
        console.error(e);
      }
    }

    loadSite();
  </script>
</body>
</html>
